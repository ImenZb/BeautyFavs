(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{fOOd:function(n,t,i){"use strict";i.r(t),i.d(t,"HomeModule",function(){return Y});var e=i("ofXK"),o=i("tyNb"),c=i("mrSG"),s=i("2Vo4"),r=i("n4WL"),a=i("fXoL"),l=i("vkgz"),b=i("ENZJ"),d=i("qfBg"),p=i("TEn/");const u=["content"];function g(n,t){1&n&&a.Kb(0,"img",10),2&n&&a.dc("src",t.ngIf,a.ic)}function m(n,t){1&n&&a.Kb(0,"img",10),2&n&&a.dc("src","assets/images/users/profile_32.png",a.ic)}function f(n,t){if(1&n&&(a.Ob(0,"ion-item"),a.Ob(1,"ion-avatar",0),a.nc(2,g,1,1,"img",7),a.nc(3,m,1,1,"ng-template",null,8,a.oc),a.Nb(),a.Ob(5,"ion-label"),a.Ob(6,"h4"),a.pc(7),a.Nb(),a.Ob(8,"p",9),a.pc(9),a.Nb(),a.Nb(),a.Nb()),2&n){const n=t.$implicit,i=a.fc(4);a.zb(2),a.dc("ngIf",n.photoUrl)("ngIfElse",i),a.zb(5),a.qc(n.username),a.zb(2),a.qc(n.body)}}let h=(()=>{class n{constructor(n,t,i){this._postService=n,this.serviceUser=t,this.modalController=i}ngOnInit(){}ngAfterViewInit(){this.posts$=this._postService.getPostsByProduct(this.produit.id).pipe(Object(l.a)(n=>console.log("posts --\x3e",n))),setTimeout(()=>{this.ionContent.nativeElement.scrollToBottom(250)},100)}closeModal(){this.modalController.dismiss()}}return n.\u0275fac=function(t){return new(t||n)(a.Jb(b.a),a.Jb(d.a),a.Jb(p.bb))},n.\u0275cmp=a.Db({type:n,selectors:[["app-modal-comment"]],viewQuery:function(n,t){if(1&n&&a.kc(u,!0,a.m),2&n){let n;a.ec(n=a.Xb())&&(t.ionContent=n.first)}},decls:18,vars:5,consts:[["slot","start"],["color","dark",3,"click"],["name","arrow-back-sharp"],["content",""],["size","12"],[4,"ngFor","ngForOf"],[3,"product","user$"],[3,"src",4,"ngIf","ngIfElse"],["default",""],[1,"post-text"],[3,"src"]],template:function(n,t){1&n&&(a.Ob(0,"ion-header"),a.Ob(1,"ion-toolbar"),a.Ob(2,"ion-buttons",0),a.Ob(3,"ion-button",1),a.Wb("click",function(){return t.closeModal()}),a.Kb(4,"ion-icon",2),a.Nb(),a.Nb(),a.Ob(5,"ion-title"),a.pc(6,"Comments"),a.Nb(),a.Nb(),a.Nb(),a.Ob(7,"ion-content",null,3),a.Ob(9,"ion-grid"),a.Ob(10,"ion-row"),a.Ob(11,"ion-col",4),a.Ob(12,"ion-list"),a.nc(13,f,10,4,"ion-item",5),a.Zb(14,"async"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(15,"ion-footer"),a.Ob(16,"ion-toolbar"),a.Kb(17,"app-popover-comment",6),a.Nb(),a.Nb()),2&n&&(a.zb(13),a.dc("ngForOf",a.ac(14,3,t.posts$)),a.zb(4),a.dc("product",t.produit)("user$",t.user$))},directives:[p.t,p.X,p.i,p.h,p.u,p.W,p.q,p.s,p.I,p.p,p.C,e.i,p.r,r.a,p.z,p.e,e.j,p.B],pipes:[e.b],styles:[".post-text[_ngcontent-%COMP%]{font-size:13px;margin:0 6px 4px}"]}),n})();var O=i("SxV6"),v=i("UbJi"),x=i("eDGZ"),k=i("lJxs"),_=i("eIep"),N=i("I/3d");let y=(()=>{class n{constructor(n,t){this._firestore=n,this._fireauth=t,this._likes$=new s.a([]),this.likes$=this._likes$.asObservable(),this._fireauth.user.pipe(Object(k.a)(n=>null==n?void 0:n.uid),Object(_.a)(n=>this._firestore.collection("likes-products",t=>t.where("uid","==",n)).stateChanges(["added"]).pipe(Object(k.a)(n=>n.map(n=>{const t=n.payload.doc.id,i=n.payload.doc.data();return Object.assign({key:t},i)}))))).subscribe(n=>{const t=[...this._likes$.value.filter(t=>!n.find(n=>n.id===t.id)),...n];this._likes$.next(t)}),this._fireauth.user.pipe(Object(k.a)(n=>null==n?void 0:n.uid),Object(_.a)(n=>this._firestore.collection("likes-products",t=>t.where("uid","==",n)).stateChanges(["removed"]).pipe(Object(k.a)(n=>n.map(n=>{const t=n.payload.doc.id,i=n.payload.doc.data();return Object.assign({key:t},i)}))))).subscribe(n=>{const t=[...this._likes$.value.filter(t=>!n.find(n=>n.id===t.id))];this._likes$.next(t)})}isLiked(n){return this._likes$.pipe(Object(k.a)(t=>t.find(t=>t.id===n)),Object(k.a)(Boolean))}add(n){return Object(c.b)(this,void 0,void 0,function*(){const{uid:t=null}=yield this._fireauth.currentUser;this._firestore.collection("likes-products").add(Object.assign(Object.assign({},n),{uid:t}))})}remove(n){return Object(c.b)(this,void 0,void 0,function*(){const t=(yield this._likes$.pipe(Object(O.a)(),Object(k.a)(t=>t.find(t=>t.id===n))).toPromise()).key;yield this._firestore.collection("likes-products").doc(t).delete()})}getCount(n){return this._firestore.collection("likes-products",t=>t.where("id","==",n)).valueChanges().pipe(Object(k.a)(n=>n.length))}}return n.\u0275fac=function(t){return new(t||n)(a.Sb(N.a),a.Sb(v.a))},n.\u0275prov=a.Fb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=i("+acA");let $=(()=>{class n{constructor(n){this._likeService=n}transform(n){return this._likeService.getCount(n)}}return n.\u0275fac=function(t){return new(t||n)(a.Jb(y))},n.\u0275pipe=a.Ib({name:"likesCount",type:n,pure:!0}),n})(),I=(()=>{class n{constructor(n){this._postService=n}transform(n){return this._postService.getFirstPostsByProduct(n)}}return n.\u0275fac=function(t){return new(t||n)(a.Jb(b.a))},n.\u0275pipe=a.Ib({name:"first",type:n,pure:!0}),n})(),w=(()=>{class n{constructor(n){this._likeService=n}transform(n){return this._likeService.isLiked(n)}}return n.\u0275fac=function(t){return new(t||n)(a.Jb(y))},n.\u0275pipe=a.Ib({name:"likesInit",type:n,pure:!0}),n})(),z=(()=>{class n{constructor(n){this._favService=n}transform(n){return this._favService.isFav$(n)}}return n.\u0275fac=function(t){return new(t||n)(a.Jb(C.a))},n.\u0275pipe=a.Ib({name:"favInit",type:n,pure:!0}),n})();function P(n,t){if(1&n&&(a.Ob(0,"ion-segment-button",17),a.Ob(1,"ion-label"),a.pc(2),a.Nb(),a.Nb()),2&n){const n=t.$implicit;a.dc("value",n),a.zb(2),a.qc(n)}}function j(n,t){if(1&n&&(a.Kb(0,"ion-icon",43),a.Zb(1,"async")),2&n){const n=a.Yb(2);a.dc("name",a.ac(1,1,n.isLiked$)?"heart":"heart-outline")}}function S(n,t){if(1&n&&(a.Kb(0,"ion-icon",43),a.Zb(1,"async"),a.Zb(2,"likesInit")),2&n){const n=a.Yb().$implicit;a.dc("name",a.ac(1,1,a.ac(2,3,n.id))?"heart":"heart-outline")}}function M(n,t){if(1&n&&(a.Kb(0,"ion-icon",44),a.Zb(1,"async")),2&n){const n=a.Yb(2);a.dc("name",a.ac(1,1,n.isFav$)?"bookmark":"bookmark-outline")}}function F(n,t){if(1&n&&(a.Kb(0,"ion-icon",43),a.Zb(1,"async"),a.Zb(2,"favInit")),2&n){const n=a.Yb().$implicit;a.dc("name",a.ac(1,1,a.ac(2,3,n.id))?"bookmark":"bookmark-outline")}}function L(n,t){if(1&n){const n=a.Pb();a.Ob(0,"ion-chip",24),a.Ob(1,"ion-label",45),a.pc(2),a.Nb(),a.Ob(3,"ion-note"),a.Ob(4,"p",46),a.pc(5),a.Nb(),a.Nb(),a.Ob(6,"ion-button",47),a.Wb("click",function(){a.gc(n);const t=a.Yb().$implicit;return a.Yb().openModal(t)}),a.Ob(7,"span",48),a.pc(8,"See all feeds"),a.Nb(),a.Nb(),a.Nb()}if(2&n){const n=t.ngIf;a.mc("background","#fff"),a.zb(2),a.rc("",n.username,", "),a.zb(3),a.qc(n.body)}}function J(n,t){1&n&&(a.Ob(0,"ion-chip",49),a.Ob(1,"ion-button",50),a.Ob(2,"span",48),a.pc(3,"0 feed"),a.Nb(),a.Nb(),a.Nb()),2&n&&a.mc("background","#fff")}function Z(n,t){1&n&&a.Kb(0,"img",51),2&n&&a.dc("src",t.ngIf,a.ic)}function K(n,t){1&n&&a.Kb(0,"img",52)}function q(n,t){if(1&n){const n=a.Pb();a.Ob(0,"ion-card",18),a.Ob(1,"ion-item",19),a.Ob(2,"ion-label",20),a.Ob(3,"h2",21),a.pc(4),a.Nb(),a.Ob(5,"ion-text",22),a.Ob(6,"p",1),a.pc(7),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Kb(8,"img",23),a.Ob(9,"ion-card-header",24),a.Ob(10,"ion-button",25),a.Wb("click",function(){a.gc(n);const i=t.$implicit;return a.Yb().toggleLike(i)}),a.nc(11,j,2,3,"ion-icon",26),a.Zb(12,"async"),a.nc(13,S,3,5,"ng-template",null,27,a.oc),a.Ob(15,"ion-note"),a.pc(16),a.Zb(17,"async"),a.Zb(18,"likesCount"),a.Nb(),a.Nb(),a.Ob(19,"ion-button",28),a.Wb("click",function(){a.gc(n);const i=t.$implicit;return a.Yb().toggleFav(i)}),a.nc(20,M,2,3,"ion-icon",29),a.Zb(21,"async"),a.nc(22,F,3,5,"ng-template",null,30,a.oc),a.Nb(),a.Nb(),a.Ob(24,"ion-card-content",24),a.Ob(25,"ion-list-header",31),a.nc(26,L,9,4,"ion-chip",32),a.Zb(27,"async"),a.Zb(28,"first"),a.nc(29,J,4,2,"ng-template",null,33,a.oc),a.Nb(),a.Kb(31,"ion-item-divider"),a.Ob(32,"ion-item",34),a.Wb("click",function(i){a.gc(n);const e=t.$implicit;return a.Yb().presentPopover(i,e)}),a.Ob(33,"ion-avatar",35),a.nc(34,Z,1,1,"img",36),a.Zb(35,"async"),a.nc(36,K,1,0,"ng-template",null,37,a.oc),a.Nb(),a.Ob(38,"ion-label",38),a.Ob(39,"ion-text",39),a.Ob(40,"p",40),a.pc(41),a.Zb(42,"async"),a.Nb(),a.Nb(),a.Ob(43,"ion-button",41),a.Wb("click",function(i){a.gc(n);const e=t.$implicit;return a.Yb().presentPopover(i,e)}),a.Kb(44,"ion-icon",42),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb()}if(2&n){const n=t.$implicit,i=a.fc(14),e=a.fc(23),o=a.fc(30),c=a.fc(37),s=a.Yb();let r=null,l=null;a.zb(4),a.qc(n.product_name),a.zb(3),a.qc(n.brand),a.zb(1),a.dc("src",n.image_url,a.ic),a.zb(3),a.dc("ngIf",null!==a.ac(12,13,s.isLiked$))("ngIfElse",i),a.zb(5),a.qc(a.ac(17,15,a.ac(18,17,n.id))),a.zb(4),a.dc("ngIf",null!==a.ac(21,19,s.isFav$))("ngIfElse",e),a.zb(6),a.dc("ngIf",a.ac(27,21,a.ac(28,23,n.id)))("ngIfElse",o),a.zb(8),a.dc("ngIf",null==(r=a.ac(35,25,s.user$))?null:r.photoUrl)("ngIfElse",c),a.zb(7),a.rc("",null==(l=a.ac(42,27,s.user$))?null:l.username," add a feed")}}const E=[{path:"",component:(()=>{class n{constructor(n,t,i,e,o,c,r,a){this._auth=n,this._userService=t,this.popoverController=i,this.modalController=e,this._productListService=o,this._postService=c,this._likeService=r,this._favService=a,this.min=0,this.max=10,this.category="all",this.searchTag=null,this.tags=["anti-acne","anti-rides","anti-rougeurs","anti-UV","bronzant","hydratant","nettoyant","peaux-sensibles","peaux-mixtes","peaux-seches","peaux-normales","cheveux","masque","corps","rasage","mains"],this._isLiked$=new s.a(null),this.isLiked$=this._isLiked$.asObservable(),this._isFav$=new s.a(null),this.isFav$=this._isFav$.asObservable()}ngOnInit(){return Object(c.b)(this,void 0,void 0,function*(){this.productList$=this._productListService.getProducts();const{uid:n=null}=yield this._auth.currentUser;this.user$=this._userService.getByUid(n)})}presentPopover(n,t){return Object(c.b)(this,void 0,void 0,function*(){const i=yield this.popoverController.create({component:r.a,cssClass:"custom-popover",event:n,translucent:!0,componentProps:{product:t,user$:this.user$}});return yield i.present()})}openModal(n){return Object(c.b)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:h,componentProps:{produit:n,user$:this.user$}});yield t.present()})}segmentChanged(n){this._productListService.setTag(n.detail.value)}onChange(n){this._productListService.setCategory(n.target.value)}loadData(n){this.max=this.max+10,n.target.complete()}toggleLike(n){return Object(c.b)(this,void 0,void 0,function*(){const t=yield this._likeService.isLiked(n.id).pipe(Object(O.a)()).toPromise();t?yield this.removeLike(n.id):yield this.addLike(n.id),this._isLiked$.next(!t)})}addLike(n){return Object(c.b)(this,void 0,void 0,function*(){yield this._likeService.add({id:n})})}removeLike(n){return Object(c.b)(this,void 0,void 0,function*(){yield this._likeService.remove(n)})}toggleFav(n){return Object(c.b)(this,void 0,void 0,function*(){const t=yield this._favService.isFav$(n.id).pipe(Object(O.a)()).toPromise();t?yield this.removeFav(n.id):yield this.addFav(n.id),this._isFav$.next(!t)})}addFav(n){return Object(c.b)(this,void 0,void 0,function*(){yield this._favService.add({id:n})})}removeFav(n){return Object(c.b)(this,void 0,void 0,function*(){yield this._favService.remove(n)})}}return n.\u0275fac=function(t){return new(t||n)(a.Jb(v.a),a.Jb(d.a),a.Jb(p.cb),a.Jb(p.bb),a.Jb(x.a),a.Jb(b.a),a.Jb(y),a.Jb(C.a))},n.\u0275cmp=a.Db({type:n,selectors:[["app-home"]],decls:34,vars:4,consts:[[1,"ion-no-padding"],[1,"ion-text-capitalize"],["slot","end",1,"ion-no-padding"],["color","dark"],["ok-text","Ok","cancel-text","Cancel","value","all",3,"ionChange"],["value","all"],["value","paramedical"],["value","biologique"],["value","artisanal"],["value","industriel"],["color","medium","value","null","scrollable","",1,"ion-no-margin","SwipedTabs-tabs","ion-text-capitalize",3,"ionChange"],["value","null",1,"ion-no-padding"],["class","ion-no-padding","color","medium","layout","icon-start",3,"value",4,"ngFor","ngForOf"],["size","12",1,"ion-no-padding"],["class","ion-margin-bottom",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],["color","medium","layout","icon-start",1,"ion-no-padding",3,"value"],[1,"ion-margin-bottom"],[1,"brandItem"],[1,"ion-no-margin"],[1,"ion-no-margin","ion-text-capitalize","name"],["color","primary"],[1,"post_img",3,"src"],[1,"ion-no-padding","ion-no-margin"],["fill","clear","shape","round","size","small",1,"ion-no-padding","ion-no-margin",3,"click"],["slot","icon-only",3,"name",4,"ngIf","ngIfElse"],["initLike",""],["fill","clear","shape","round","size","small",1,"bookmark",3,"click"],[3,"name",4,"ngIf","ngIfElse"],["initFav",""],["lines","line",1,"ion-no-padding","ion-no-margin"],["class","ion-no-padding ion-no-margin",3,"background",4,"ngIf","ngIfElse"],["comment",""],["lines","none",3,"click"],["slot","start",1,"comment_avatar"],[3,"src",4,"ngIf","ngIfElse"],["default",""],[1,"inputComment","ion-padding"],["color","medium"],[1,"s-text2"],["fill","clear","sizs","small",3,"click"],["slot","end","name","send"],["slot","icon-only",3,"name"],[3,"name"],[1,"post_label"],[1,"post-text"],["fill","clear","size","small",3,"click"],[1,"comment-text1"],[1,"ion-text-center"],["fill","clear","size","small",1,"ion-no-padding","ion-no-margin","text","center"],[3,"src"],["src","assets/images/users/profile_32.png"]],template:function(n,t){if(1&n&&(a.Ob(0,"ion-header"),a.Ob(1,"ion-toolbar",0),a.Ob(2,"ion-title",0),a.Ob(3,"h1",1),a.pc(4,"BeautyFavs"),a.Nb(),a.Nb(),a.Ob(5,"ion-buttons",2),a.Ob(6,"ion-button",3),a.Ob(7,"ion-item"),a.Ob(8,"ion-select",4),a.Wb("ionChange",function(n){return t.onChange(n)}),a.Ob(9,"ion-select-option",5),a.pc(10,"All"),a.Nb(),a.Ob(11,"ion-select-option",6),a.pc(12,"Paramedical"),a.Nb(),a.Ob(13,"ion-select-option",7),a.pc(14,"Biologique"),a.Nb(),a.Ob(15,"ion-select-option",8),a.pc(16,"Artisanal"),a.Nb(),a.Ob(17,"ion-select-option",9),a.pc(18,"Industriel"),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Ob(19,"ion-toolbar"),a.Ob(20,"ion-segment",10),a.Wb("ionChange",function(n){return t.segmentChanged(n)}),a.Ob(21,"ion-segment-button",11),a.Ob(22,"ion-label"),a.pc(23,"All"),a.Nb(),a.Nb(),a.nc(24,P,3,2,"ion-segment-button",12),a.Nb(),a.Nb(),a.Nb(),a.Ob(25,"ion-content"),a.Ob(26,"ion-grid",0),a.Ob(27,"ion-row",0),a.Ob(28,"ion-col",13),a.Ob(29,"ion-list",0),a.nc(30,q,45,29,"ion-card",14),a.Zb(31,"async"),a.Nb(),a.Ob(32,"ion-infinite-scroll",15),a.Wb("ionInfinite",function(n){return t.loadData(n)}),a.Kb(33,"ion-infinite-scroll-content",16),a.Nb(),a.Nb(),a.Nb(),a.Nb(),a.Nb()),2&n){let n=null;a.zb(24),a.dc("ngForOf",t.tags.sort()),a.zb(6),a.dc("ngForOf",null==(n=a.ac(31,2,t.productList$))?null:n.slice(t.min,t.max))}},directives:[p.t,p.X,p.W,p.i,p.h,p.z,p.M,p.eb,p.N,p.K,p.L,p.B,e.i,p.q,p.s,p.I,p.p,p.C,p.w,p.x,p.j,p.T,p.l,e.j,p.G,p.k,p.D,p.A,p.e,p.u,p.o],pipes:[e.b,$,I,w,z],styles:[".img-wrapper[_ngcontent-%COMP%]{min-height:40px;width:100%;background-size:cover;background-repeat:no-repeat;vertical-align:middle}.post_img[_ngcontent-%COMP%]{width:100%;max-height:300px}.post_avatar[_ngcontent-%COMP%]{padding:2px;height:35px;width:35px}.post_label[_ngcontent-%COMP%]{white-space:nowrap;font-size:14px!important;font-weight:700;padding-left:5px}.post-text[_ngcontent-%COMP%], .post_label[_ngcontent-%COMP%]{color:#1e2023!important}.post-text[_ngcontent-%COMP%]{font-size:12px;margin:0 6px}.comment-text1[_ngcontent-%COMP%]{margin:2.5px 6px 0 16px}.comment-text1[_ngcontent-%COMP%], .comment-text2[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium)}.comment-text2[_ngcontent-%COMP%]{display:inline;margin:2px 6px 0 0}.comment_avatar[_ngcontent-%COMP%]{padding:1px;height:40px;width:40px}.bookmark[_ngcontent-%COMP%]{position:absolute;right:-27px}ion-segment[_ngcontent-%COMP%]{height:40px;min-height:40px;padding-top:5px}ion-segment-button[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:var(--ion-color-medium);text-transform:capitalize;--border-color:#f2f2f2;--border-radius:5px;--border-style:solid;--border-width:1px;height:30px;min-height:30px;min-width:100px;--padding-end:3px;color:#1e2023}ion-card[_ngcontent-%COMP%]{box-shadow:0 0 6px 0 rgba(157,96,212,.5);border:3px solid transparent;background-image:linear-gradient(hsla(0,0%,100%,0),hsla(0,0%,100%,0)),linear-gradient(101deg,#78e4ff,#ff48fa);background-origin:border-box;background-clip:content-box,border-box;box-shadow:inset 2px 1000px 1px #fff}ion-item.brandItem[_ngcontent-%COMP%]{--padding-start:2px;font-weight:550}h2.name[_ngcontent-%COMP%]{font-weight:550}.inputComment[_ngcontent-%COMP%]{border:1px solid #f5f6f9;border-radius:50px;font-size:12px;background-color:#f5f6f9;position:relative}.inputComment[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;right:5px;top:8px}ion-item-divider[_ngcontent-%COMP%]{min-height:1px}"]}),n})()}];let W=(()=>{class n{}return n.\u0275mod=a.Hb({type:n}),n.\u0275inj=a.Gb({factory:function(t){return new(t||n)},imports:[[o.g.forChild(E)],o.g]}),n})(),Y=(()=>{class n{}return n.\u0275mod=a.Hb({type:n}),n.\u0275inj=a.Gb({factory:function(t){return new(t||n)},imports:[[e.c,W,p.Y]]}),n})()}}]);