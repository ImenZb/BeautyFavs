(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+acA":function(t,e,n){"use strict";n.d(e,"a",function(){return p});var i=n("mrSG"),r=n("2Vo4"),o=n("lJxs"),s=n("eIep"),c=n("SxV6"),a=n("fXoL"),u=n("I/3d"),l=n("UbJi"),d=n("eDGZ");let p=(()=>{class t{constructor(t,e,n){this._firestore=t,this._fireauth=e,this._productListService=n,this._fav$=new r.a([]),this.favs$=this._fav$.asObservable(),this._fireauth.user.pipe(Object(o.a)(t=>null==t?void 0:t.uid),Object(s.a)(t=>this._firestore.collection("fav-products",e=>e.where("uid","==",t)).stateChanges(["added"]).pipe(Object(o.a)(t=>t.map(t=>{const e=t.payload.doc.id,n=t.payload.doc.data();return Object.assign({key:e},n)}))))).subscribe(t=>{const e=[...this._fav$.value.filter(e=>!t.find(t=>t.id===e.id)),...t];this._fav$.next(e)}),this._fireauth.user.pipe(Object(o.a)(t=>null==t?void 0:t.uid),Object(s.a)(t=>this._firestore.collection("fav-products",e=>e.where("uid","==",t)).stateChanges(["removed"]).pipe(Object(o.a)(t=>t.map(t=>{const e=t.payload.doc.id,n=t.payload.doc.data();return Object.assign({key:e},n)}))))).subscribe(t=>{const e=[...this._fav$.value.filter(e=>!t.find(t=>t.id===e.id))];this._fav$.next(e)})}isFav$(t){return this._fav$.pipe(Object(o.a)(e=>e.find(e=>e.id===t)),Object(o.a)(Boolean))}add(t){return Object(i.b)(this,void 0,void 0,function*(){const{uid:e=null}=yield this._fireauth.currentUser;this._firestore.collection("fav-products").add(Object.assign(Object.assign({},t),{uid:e}))})}remove(t){return Object(i.b)(this,void 0,void 0,function*(){const e=(yield this._fav$.pipe(Object(c.a)(),Object(o.a)(e=>e.find(e=>e.id===t))).toPromise()).key;yield this._firestore.collection("fav-products").doc(e).delete()})}getFavProductsList(){return Object(i.b)(this,void 0,void 0,function*(){const t=this._fav$.value,e=[];return console.log("favs",t),t.forEach(t=>Object(i.b)(this,void 0,void 0,function*(){const n=yield this._productListService.getByID(t.id).pipe(Object(c.a)()).toPromise();e.push(...n)})),e})}}return t.\u0275fac=function(e){return new(e||t)(a.Sb(u.a),a.Sb(l.a),a.Sb(d.a))},t.\u0275prov=a.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"74mu":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return c});const i=(t,e)=>null!==e.closest(t),r=(t,e)=>"string"==typeof t&&t.length>0?Object.assign({"ion-color":!0,["ion-color-"+t]:!0},e):e,o=t=>{const e={};return(t=>void 0!==t?(Array.isArray(t)?t:t.split(" ")).filter(t=>null!=t).map(t=>t.trim()).filter(t=>""!==t):[])(t).forEach(t=>e[t]=!0),e},s=/^[a-z][a-z0-9+\-.]*:/,c=async(t,e,n,i)=>{if(null!=t&&"#"!==t[0]&&!s.test(t)){const r=document.querySelector("ion-router");if(r)return null!=e&&e.preventDefault(),r.push(t,n,i)}return!1}},Gdn9:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n("lJxs"),r=n("fXoL"),o=n("tk/3");const s="http://localhost:3000/products";let c=(()=>{class t{constructor(t){this.http=t}getAll(){return this.http.get(s)}getById(t){return this.http.get(s).pipe(Object(i.a)(e=>e.find(e=>e.id===t)))}getByTag(t){return this.http.get(s).pipe(Object(i.a)(e=>e.filter(e=>e.tag===t)))}getByCategory(t){return this.http.get(s).pipe(Object(i.a)(e=>e.filter(e=>e.category===t)))}getByTagCategory(t,e){return this.http.get(s).pipe(Object(i.a)(n=>n.filter(n=>n.category===t&&n.tag===e)))}create(t){return this.http.post(s,t).toPromise()}update(t){return this.http.put(s+"/"+t.id,t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(o.a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},JbSX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("wEJo"),r=n("qULd"),o=n("iWo5");const s=(t,e)=>{let n,s;const c=(t,i,r)=>{if("undefined"==typeof document)return;const o=document.elementFromPoint(t,i);o&&e(o)?o!==n&&(u(),a(o,r)):u()},a=(t,e)=>{n=t,s||(s=n);const r=n;Object(i.f)(()=>r.classList.add("ion-activated")),e()},u=(t=!1)=>{if(!n)return;const e=n;Object(i.f)(()=>e.classList.remove("ion-activated")),t&&s!==n&&n.click(),n=void 0};return Object(o.createGesture)({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>c(t.currentX,t.currentY,r.a),onMove:t=>c(t.currentX,t.currentY,r.b),onEnd:()=>{u(!0),Object(r.e)(),s=void 0}})}},acej:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var i=n("1vRN");const r=async(t,e,n,r,o)=>{if(t)return t.attachViewToDom(e,n,o,r);if("string"!=typeof n&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof n?e.ownerDocument&&e.ownerDocument.createElement(n):n;return r&&r.forEach(t=>s.classList.add(t)),o&&Object.assign(s,o),e.appendChild(s),await new Promise(t=>Object(i.c)(s,t)),s},o=(t,e)=>{if(e){if(t)return t.removeViewFromDom(e.parentElement,e);e.remove()}return Promise.resolve()}},h3R7:function(t,e,n){"use strict";n.d(e,"a",function(){return i});const i={bubbles:{dur:1e3,circles:9,fn:(t,e,n)=>{const i=t*e/n-t+"ms",r=2*Math.PI*e/n;return{r:5,style:{top:9*Math.sin(r)+"px",left:9*Math.cos(r)+"px","animation-delay":i}}}},circles:{dur:1e3,circles:8,fn:(t,e,n)=>{const i=e/n,r=t*i-t+"ms",o=2*Math.PI*i;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":r}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:()=>({r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}})},crescent:{dur:750,circles:1,fn:()=>({r:26,style:{}})},dots:{dur:750,circles:3,fn:(t,e)=>({r:6,style:{left:9-9*e+"px","animation-delay":-110*e+"ms"}})},lines:{dur:1e3,lines:12,fn:(t,e,n)=>({y1:17,y2:29,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/n-t+"ms"}})},"lines-small":{dur:1e3,lines:12,fn:(t,e,n)=>({y1:12,y2:20,style:{transform:`rotate(${30*e+(e<6?180:-180)}deg)`,"animation-delay":t*e/n-t+"ms"}})}}},n4WL:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var i=n("mrSG"),r=n("fXoL"),o=n("TEn/"),s=n("Gdn9"),c=n("UbJi"),a=n("ENZJ"),u=n("ofXK");function l(t,e){1&t&&r.Kb(0,"img",13),2&t&&r.dc("src",e.ngIf,r.ic)}function d(t,e){1&t&&r.Kb(0,"img",13),2&t&&r.dc("src","assets/images/users/profile_32.png",r.ic)}let p=(()=>{class t{constructor(t,e,n,i){this.popoverController=t,this.serviceProduit=e,this._auth=n,this._postService=i}ngOnInit(){}getSmiley(t){return t.srcElement.innerText}sendComment(t){return Object(i.b)(this,void 0,void 0,function*(){const{uid:e=null}=yield this._auth.currentUser;this._postService.save({uid:e,productId:this.product.id,body:t.value}),(yield this.popoverController.getTop())&&this.popoverController.dismiss()})}ClosePopover(){this.popoverController.dismiss()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(o.cb),r.Jb(s.a),r.Jb(c.a),r.Jb(a.a))},t.\u0275cmp=r.Db({type:t,selectors:[["app-popover-comment"]],inputs:{product:"product",user$:"user$"},decls:37,vars:4,consts:[["fixed","",1,"ion-no-padding"],[1,"ion-no-padding"],["size","12",1,"ion-no-padding"],["lines","none"],[1,"smilies",3,"click"],["slot","start",1,"comment_avatar"],[3,"src",4,"ngIf","ngIfElse"],["default",""],[1,"inputComment"],["type","text","placeholder","Add a feed..."],["ic",""],["fill","clear","shape","round",3,"click"],["slot","end","name","send"],[3,"src"]],template:function(t,e){if(1&t){const t=r.Pb();r.Ob(0,"ion-grid",0),r.Ob(1,"ion-row",1),r.Ob(2,"ion-col",2),r.Ob(3,"ion-item",3),r.Ob(4,"ion-label",4),r.Wb("click",function(n){r.gc(t);const i=r.fc(34);return i.value=i.value+e.getSmiley(n)}),r.Ob(5,"span"),r.pc(6," \ud83d\udd25"),r.Nb(),r.Ob(7,"span"),r.pc(8," \ud83d\ude0a"),r.Nb(),r.Ob(9,"span"),r.pc(10," \ud83d\ude0d"),r.Nb(),r.Ob(11,"span"),r.pc(12," \ud83d\udc96"),r.Nb(),r.Ob(13,"span"),r.pc(14," \ud83d\udc4d"),r.Nb(),r.Ob(15,"span"),r.pc(16," \ud83d\udc4f"),r.Nb(),r.Ob(17,"span"),r.pc(18," \ud83c\udf3a"),r.Nb(),r.Ob(19,"span"),r.pc(20," \u2757"),r.Nb(),r.Ob(21,"span"),r.pc(22," \ud83d\uded1"),r.Nb(),r.Ob(23,"span"),r.pc(24," \u2695\ufe0f"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(25,"ion-col",2),r.Ob(26,"ion-item",3),r.Ob(27,"ion-avatar",5),r.nc(28,l,1,1,"img",6),r.Zb(29,"async"),r.nc(30,d,1,1,"ng-template",null,7,r.oc),r.Nb(),r.Ob(32,"ion-item",8),r.Kb(33,"ion-input",9,10),r.Ob(35,"ion-button",11),r.Wb("click",function(){r.gc(t);const n=r.fc(34);return e.sendComment(n)}),r.Kb(36,"ion-icon",12),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()}if(2&t){const t=r.fc(31);let n=null;r.zb(28),r.dc("ngIf",null==(n=r.ac(29,2,e.user$))?null:n.photoUrl)("ngIfElse",t)}},directives:[o.s,o.I,o.p,o.z,o.B,o.e,u.j,o.y,o.fb,o.h,o.u],pipes:[u.b],styles:["span[_ngcontent-%COMP%]{margin-right:8px;width:30px;height:30px}.smilies[_ngcontent-%COMP%]{display:flex;overflow:scroll}.inputComment[_ngcontent-%COMP%]{--border-width:0.2px!important;--border-color:var(--ion-color-medium);--border-radius:30px;font-size:12px}"]}),t})()},qULd:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return r}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return c});const i={getEngine(){const t=window;return t.TapticEngine||t.Capacitor&&t.Capacitor.isPluginAvailable("Haptics")&&t.Capacitor.Plugins.Haptics},available(){return!!this.getEngine()},isCordova:()=>!!window.TapticEngine,isCapacitor:()=>!!window.Capacitor,impact(t){const e=this.getEngine();if(!e)return;const n=this.isCapacitor()?t.style.toUpperCase():t.style;e.impact({style:n})},notification(t){const e=this.getEngine();if(!e)return;const n=this.isCapacitor()?t.style.toUpperCase():t.style;e.notification({style:n})},selection(){this.impact({style:"light"})},selectionStart(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionStart():t.gestureSelectionStart())},selectionChanged(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionChanged():t.gestureSelectionChanged())},selectionEnd(){const t=this.getEngine();t&&(this.isCapacitor()?t.selectionEnd():t.gestureSelectionEnd())}},r=()=>{i.selection()},o=()=>{i.selectionStart()},s=()=>{i.selectionChanged()},c=()=>{i.selectionEnd()},a=t=>{i.impact(t)}},qfBg:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("vkgz"),r=n("Jgta"),o=n("fXoL"),s=n("I/3d"),c=n("UbJi"),a=n("tyNb");let u=(()=>{class t{constructor(t,e,n){this._af=t,this._auth=e,this._router=n}registerWithEmailPwd(t){this._auth.createUserWithEmailAndPassword(t.email,t.password).then(e=>{this._SetUserData({uid:e.user.uid,lastName:t.lastName,firstName:t.firstName,username:t.username,email:t.email})})}GoogleAuth(){this.AuthLogin(new r.a.auth.GoogleAuthProvider)}AuthLogin(t){this._auth.signInWithPopup(t).then(t=>{const e={username:null==t?void 0:t.user.displayName,email:null==t?void 0:t.user.email,uid:null==t?void 0:t.user.uid,photoUrl:null==t?void 0:t.user.photoURL};this._af.doc("users/"+e.uid).set(e,{merge:!0}),this._router.navigate(["home"])}).catch(t=>{window.alert(t)})}_SetUserData(t){return this._af.doc("users/"+t.uid).set({uid:t.uid,email:t.email,username:t.username,lastName:t.lastName},{merge:!0})}getByUid(t){return this._af.doc("users/"+t).valueChanges()}getAll(){return this._af.collection("users").valueChanges().pipe(Object(i.a)(t=>console.log("----\x3e",t)))}}return t.\u0275fac=function(e){return new(e||t)(o.Sb(s.a),o.Sb(c.a),o.Sb(a.e))},t.\u0275prov=o.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);