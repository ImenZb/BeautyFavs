(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{FSlI:function(i,t,e){"use strict";e.r(t),e.d(t,"DetailModule",function(){return y});var n=e("ofXK"),o=e("tyNb"),s=e("mrSG"),c=e("2Vo4"),r=e("SxV6"),a=e("n4WL"),b=e("fXoL"),d=e("eDGZ"),l=e("UbJi"),u=e("qfBg"),p=e("ENZJ"),h=e("+acA"),m=e("P3Ni"),v=e("TEn/");function g(i,t){if(1&i){const i=b.Pb();b.Mb(0),b.Ob(1,"ion-toolbar"),b.Ob(2,"ion-buttons",16),b.Ob(3,"ion-button",17),b.Wb("click",function(){return b.hc(i),b.Yb().goBack()}),b.Kb(4,"ion-icon",18),b.Nb(),b.Nb(),b.Nb(),b.Lb()}if(2&i){const i=b.Yb();b.zb(1),b.nc("--background","url("+i.item.image_url+")")}}function O(i,t){if(1&i&&(b.Ob(0,"ion-item",20),b.Ob(1,"ion-avatar",21),b.Kb(2,"img",22),b.Nb(),b.Ob(3,"ion-label"),b.Ob(4,"ion-text",23),b.Ob(5,"p",24),b.Ob(6,"b"),b.qc(7),b.Nb(),b.qc(8),b.Nb(),b.Nb(),b.Nb(),b.Nb()),2&i){const i=t.$implicit;b.zb(2),b.ec("src",i.photoUrl||"assets/images/users/profile_32.png",b.jc),b.zb(5),b.rc(i.username),b.zb(1),b.sc(", ",i.body,"")}}function f(i,t){if(1&i&&(b.Mb(0),b.Ob(1,"ion-list"),b.Ob(2,"ion-list-header"),b.Ob(3,"ion-label"),b.qc(4,"Reviews"),b.Nb(),b.Nb(),b.oc(5,O,9,3,"ion-item",19),b.Nb(),b.Lb()),2&i){const i=t.ngIf;b.zb(5),b.ec("ngForOf",i)}}const k=[{path:"",children:[{path:":id",component:(()=>{class i{constructor(i,t,e,n,o,s,r,a,b){this._productListService=i,this._auth=t,this._userService=e,this._postService=n,this._favService=o,this._likeService=s,this.routerA=r,this._location=a,this.popoverController=b,this._isFav$=new c.a(null),this.isFav$=this._isFav$.asObservable(),this._isLiked$=new c.a(null),this.isLiked$=this._isLiked$.asObservable()}ngOnInit(){return Object(s.b)(this,void 0,void 0,function*(){this.id=this.routerA.snapshot.params.id,this.item=(yield this._productListService.getByID(this.id).pipe(Object(r.a)()).toPromise())[0];const{uid:i=null}=yield this._auth.currentUser;this.user=yield this._userService.getByUid(i).pipe(Object(r.a)()).toPromise(),this.posts$=this._postService.getPostsByProduct(this.id);const t=yield this.isLiked(this.id);this._isLiked$.next(t);const e=yield this.isFav(this.id);this._isFav$.next(e),this.likesCount=this._likeService.getCount(this.id)})}toggleLike(i){return Object(s.b)(this,void 0,void 0,function*(){const t=yield this._likeService.isLiked(i.id).pipe(Object(r.a)()).toPromise();t?yield this.removeLike(i.id):yield this.addLike(i.id),this._isLiked$.next(!t)})}isLiked(i){return Object(s.b)(this,void 0,void 0,function*(){return yield this._likeService.isLiked(i).pipe(Object(r.a)()).toPromise()})}addLike(i){return Object(s.b)(this,void 0,void 0,function*(){yield this._likeService.add({id:i})})}removeLike(i){return Object(s.b)(this,void 0,void 0,function*(){yield this._likeService.remove(i)})}toggleFav(i){return Object(s.b)(this,void 0,void 0,function*(){const t=yield this._favService.isFav$(i.id).pipe(Object(r.a)()).toPromise();t?yield this.removeFav(i.id):yield this.addFav(i.id),this._isFav$.next(!t)})}isFav(i){return Object(s.b)(this,void 0,void 0,function*(){return yield this._favService.isFav$(i).pipe(Object(r.a)()).toPromise()})}addFav(i){return Object(s.b)(this,void 0,void 0,function*(){yield this._favService.add({id:i})})}removeFav(i){return Object(s.b)(this,void 0,void 0,function*(){yield this._favService.remove(i)})}presentPopover(i,t){return Object(s.b)(this,void 0,void 0,function*(){const e=yield this.popoverController.create({component:a.a,cssClass:"custom-popover",event:i,translucent:!0,componentProps:{product:t,user:this.user}});return yield e.present()})}goBack(){this._location.back()}}return i.\u0275fac=function(t){return new(t||i)(b.Jb(d.a),b.Jb(l.a),b.Jb(u.a),b.Jb(p.a),b.Jb(h.a),b.Jb(m.a),b.Jb(o.a),b.Jb(n.h),b.Jb(v.ab))},i.\u0275cmp=b.Db({type:i,selectors:[["app-detail"]],decls:32,vars:15,consts:[["translucent",""],[4,"ngIf"],["fullscreen",""],[1,"ion-no-padding"],["size","12",1,"ion-no-padding"],[1,"ion-no-padding","ion-no-margin"],["fill","clear","shape","round","size","small",3,"click"],["slot","start",3,"name"],["fill","clear","shape","round","size","small",1,"bookmark",3,"click"],[3,"name"],[1,"ion-text-center"],[1,"ion-no-margin","ion-padding-top"],[1,"ion-no-margin"],["fill","clear",3,"click"],["slot","start","name","add"],[1,"ion-no-margin","ion-no-padding"],["slot","start"],[3,"click"],["color","medium","slot","icon-only","name","arrow-back-outline"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["slot","start",1,"comment_avatar"],[3,"src"],["color","medium"],[1,"comment-text"]],template:function(i,t){1&i&&(b.Ob(0,"ion-header",0),b.oc(1,g,5,2,"ng-container",1),b.Nb(),b.Ob(2,"ion-content",2),b.Ob(3,"ion-grid",3),b.Ob(4,"ion-row",3),b.Ob(5,"ion-col",4),b.Ob(6,"ion-card",5),b.Ob(7,"ion-card-header",5),b.Ob(8,"ion-button",6),b.Wb("click",function(){return t.toggleLike(t.item)}),b.Kb(9,"ion-icon",7),b.Zb(10,"async"),b.Ob(11,"ion-note"),b.qc(12),b.Zb(13,"async"),b.Nb(),b.Nb(),b.Ob(14,"ion-button",8),b.Wb("click",function(){return t.toggleFav(t.item)}),b.Kb(15,"ion-icon",9),b.Zb(16,"async"),b.Nb(),b.Nb(),b.Ob(17,"ion-card-header",10),b.Ob(18,"ion-card-title",11),b.qc(19),b.Nb(),b.Ob(20,"ion-card-title",12),b.qc(21),b.Nb(),b.Ob(22,"ion-card-title",11),b.Ob(23,"ion-text"),b.Ob(24,"h6"),b.qc(25,"Add your review on this product"),b.Nb(),b.Nb(),b.Ob(26,"ion-button",13),b.Wb("click",function(i){return t.presentPopover(i,t.item)}),b.qc(27," Add feed "),b.Kb(28,"ion-icon",14),b.Nb(),b.Nb(),b.Nb(),b.Ob(29,"ion-card-content",15),b.oc(30,f,6,1,"ng-container",1),b.Zb(31,"async"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()),2&i&&(b.zb(1),b.ec("ngIf",t.item),b.zb(8),b.ec("name",b.ac(10,7,t.isLiked$)?"heart":"heart-outline"),b.zb(3),b.rc(b.ac(13,9,t.likesCount)),b.zb(3),b.ec("name",b.ac(16,11,t.isFav$)?"bookmark":"bookmark-outline"),b.zb(4),b.sc(" ",null==t.item?null:t.item.product_name," "),b.zb(2),b.sc(" ",null==t.item?null:t.item.brand," "),b.zb(9),b.ec("ngIf",b.ac(31,13,t.posts$)))},directives:[v.t,n.k,v.q,v.s,v.G,v.p,v.j,v.l,v.h,v.u,v.E,v.m,v.R,v.k,v.V,v.i,v.C,v.D,v.B,n.j,v.z,v.e],pipes:[n.b],styles:["ion-toolbar[_ngcontent-%COMP%]{--min-height:300px!important}ion-buttons[_ngcontent-%COMP%]{position:absolute;top:40px;left:10px}h2[_ngcontent-%COMP%]{font-weight:700;color:#6e6e6e}h2[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}p[_ngcontent-%COMP%]{font-size:12px}.bookmark[_ngcontent-%COMP%]{position:absolute;right:15px}ion-card-header[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}ion-chip[_ngcontent-%COMP%]{padding-left:8px}.post-text[_ngcontent-%COMP%]{font-size:13px;margin:0 6px 4px}.comment-text[_ngcontent-%COMP%]{font-size:12px;margin:0 6px 4px;color:var(--ion-color-medium)}.comment_avatar[_ngcontent-%COMP%]{padding:1px;height:40px;width:40px}"]}),i})()}]}];let _=(()=>{class i{}return i.\u0275mod=b.Hb({type:i}),i.\u0275inj=b.Gb({factory:function(t){return new(t||i)},imports:[[o.g.forChild(k)],o.g]}),i})(),y=(()=>{class i{}return i.\u0275mod=b.Hb({type:i}),i.\u0275inj=b.Gb({factory:function(t){return new(t||i)},imports:[[n.c,_,v.W]]}),i})()}}]);