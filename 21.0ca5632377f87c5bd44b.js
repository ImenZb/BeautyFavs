(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{Wlq6:function(e,t,n){"use strict";n.r(t),n.d(t,"SearchModule",function(){return _});var i=n("ofXK"),r=n("tyNb"),o=n("mrSG"),c=n("cp0P"),l=n("SxV6"),s=n("lJxs"),a=n("81uL"),b=n("fXoL"),u=n("IheW");let p=(()=>{class e{constructor(e){this._http=e}getAll(e){return this._http.get("https://www.googleapis.com/customsearch/v1?key=AIzaSyCFen6NifzjQvj_QX8vhh_-sMil2nJtNbI&cx=4a589f3673b1234e4&q="+e)}}return e.\u0275fac=function(t){return new(t||e)(b.Sb(u.a))},e.\u0275prov=b.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=n("Gdn9"),h=n("eDGZ"),m=n("TEn/"),g=n("aZ8m");function f(e,t){1&e&&(b.Ob(0,"ion-list-header"),b.Ob(1,"ion-label"),b.rc(2,"Already reviewd"),b.Nb(),b.Nb())}function O(e,t){if(1&e&&(b.Mb(0),b.Ob(1,"ion-item"),b.Ob(2,"ion-avatar",4),b.Kb(3,"img",5),b.Nb(),b.Ob(4,"ion-label",6),b.Ob(5,"ion-text"),b.rc(6),b.Nb(),b.Ob(7,"ion-text",7),b.Kb(8,"br"),b.rc(9),b.Nb(),b.Nb(),b.Ob(10,"ion-button",8),b.Kb(11,"ion-icon",9),b.Nb(),b.Nb(),b.Lb()),2&e){const e=t.$implicit;b.zb(3),b.ec("src",null==e?null:e.image_url,b.kc),b.zb(3),b.sc(null==e?null:e.product_name),b.zb(3),b.tc("",e.brand," "),b.zb(1),b.ec("routerLink","../detail/"+e.id)}}function N(e,t){1&e&&(b.Ob(0,"ion-list-header"),b.Ob(1,"ion-label"),b.rc(2,"New products add feed"),b.Nb(),b.Nb())}function y(e,t){if(1&e){const e=b.Pb();b.Mb(0),b.Ob(1,"ion-item"),b.Ob(2,"ion-avatar",4),b.Kb(3,"img",5),b.Nb(),b.Ob(4,"ion-label",6),b.Kb(5,"ion-text",10),b.Ob(6,"ion-text",7),b.Kb(7,"br"),b.rc(8),b.Nb(),b.Nb(),b.Ob(9,"ion-button",11),b.Wb("click",function(){b.ic(e);const t=b.Yb().$implicit;return b.Yb().openModal(t)}),b.Kb(10,"ion-icon",12),b.Nb(),b.Nb(),b.Lb()}if(2&e){const e=b.Yb().$implicit;b.zb(3),b.ec("src",null==e||null==e.pagemap||null==e.pagemap.cse_thumbnail[0]?null:e.pagemap.cse_thumbnail[0].src,b.kc),b.zb(2),b.ec("innerHTML",(null==e?null:e.htmlTitle.split("/b>")[0])+"/b>",b.jc),b.zb(3),b.tc("Vendu par ",e.displayLink.split(".")[1]," ")}}function v(e,t){if(1&e&&(b.Mb(0),b.pc(1,y,11,3,"ng-container",2),b.Lb()),2&e){const e=t.$implicit;b.zb(1),b.ec("ngIf",(null==e||null==e.pagemap?null:e.pagemap.cse_thumbnail)&&!(null!=e&&e.htmlTitle.includes("ligne")))}}const L=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.serviceGoogle=e,this.serviceProduit=t,this._productListService=n,this.modalCtrl=i,this.query="",this.isKeyEntered=!1}ngOnInit(){}filterList(e){this.query=e.srcElement.value,this.isKeyEntered=!0,this.resultsGoogle=this.getGoogle(),this.resultsLocal=this.getLocal()}getGoogle(){return Object(c.a)([this.serviceGoogle.getAll(this.query),this._productListService.productList$.pipe(Object(l.a)())]).pipe(Object(s.a)(([e,t])=>{let n=[];return[...e.items].forEach(e=>{for(let i=0;i<t.length;i++){const r=t[i],o=e.title.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),c=r.product_name.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");o.includes(c)||n.push(e)}}),[...new Set(n)]}))}getLocal(){return Object(c.a)([this.serviceGoogle.getAll(this.query),this._productListService.productList$.pipe(Object(l.a)()),this.getProduct().pipe(Object(l.a)())]).pipe(Object(s.a)(([e,t,n])=>{let i=[];return[...e.items].forEach(e=>{for(let n=0;n<t.length;n++){const r=t[n],o=e.title.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),c=r.product_name.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");o.split(""),o.includes(c)&&i.push(r)}}),[...new Set([...i,...n])]}))}openModal(e){return Object(o.b)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:a.a,componentProps:{productName:e.title,productImg:e.pagemap.cse_thumbnail[0].src||"../../../assets/images/home1.jpg"}});yield t.present()})}getProduct(){return this._productListService.getProducts().pipe(Object(s.a)(e=>e.filter(e=>this.isMatched(this.query,e.product_name))))}isMatched(e,t){let n=e.split(" "),i=!1;for(let r=0;r<n.length&&(i=t.includes(n[r]),!i);r++);return i}}return e.\u0275fac=function(t){return new(t||e)(b.Jb(p),b.Jb(d.a),b.Jb(h.a),b.Jb(m.Y))},e.\u0275cmp=b.Db({type:e,selectors:[["app-search"]],decls:19,vars:10,consts:[["size","12"],[3,"keyup.enter"],[4,"ngIf"],[4,"ngFor","ngForOf"],["slot","start"],[3,"src"],[1,"ion-text-wrap","myLabel"],["color","primary"],["fill","clear","shape","round","size","small",3,"routerLink"],["slot","end","name","chevron-forward-outline"],[3,"innerHTML"],["fill","clear","shape","round","size","small",3,"click"],["slot","end","name","add"]],template:function(e,t){if(1&e&&(b.Kb(0,"app-header"),b.Ob(1,"ion-content"),b.Ob(2,"ion-grid"),b.Ob(3,"ion-row"),b.Ob(4,"ion-col",0),b.Ob(5,"ion-searchbar",1),b.Wb("keyup.enter",function(e){return t.filterList(e)}),b.Nb(),b.Nb(),b.Nb(),b.Ob(6,"ion-row"),b.Ob(7,"ion-col",0),b.Ob(8,"ion-list"),b.pc(9,f,3,0,"ion-list-header",2),b.Zb(10,"async"),b.pc(11,O,12,4,"ng-container",3),b.Zb(12,"async"),b.Nb(),b.Nb(),b.Nb(),b.Ob(13,"ion-row"),b.Ob(14,"ion-col",0),b.Ob(15,"ion-list"),b.pc(16,N,3,0,"ion-list-header",2),b.pc(17,v,2,1,"ng-container",3),b.Zb(18,"async"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()),2&e){let e=null;b.zb(9),b.ec("ngIf",t.isKeyEntered&&(null==(e=b.ac(10,4,t.resultsLocal))?null:e.length)>0),b.zb(2),b.ec("ngForOf",b.ac(12,6,t.resultsLocal)),b.zb(5),b.ec("ngIf",t.isKeyEntered),b.zb(1),b.ec("ngForOf",b.ac(18,8,t.resultsGoogle))}},directives:[g.a,m.q,m.s,m.G,m.p,m.H,m.cb,m.C,i.j,i.i,m.D,m.B,m.z,m.e,m.R,m.h,r.f,m.ab,m.u],pipes:[i.b],styles:[".myLabel[_ngcontent-%COMP%]{font-size:12px}"]}),e})()}];let z=(()=>{class e{}return e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(L)],r.g]}),e})();var w=n("PCNd");let _=(()=>{class e{}return e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({factory:function(t){return new(t||e)},imports:[[i.c,z,m.W,u.b,w.a]]}),e})()}}]);