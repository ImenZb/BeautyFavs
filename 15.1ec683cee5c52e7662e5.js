(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{fOOd:function(e,i,t){"use strict";t.r(i),t.d(i,"HomeModule",function(){return F});var n=t("ofXK"),o=t("tyNb"),a=t("mrSG"),s=t("XNiG"),r=t("n4WL"),c=t("Nf9K"),l=t("SxV6"),d=t("fXoL"),b=t("UbJi"),u=t("qfBg"),p=t("TEn/"),h=t("eDGZ"),g=t("ENZJ"),f=t("2Vo4"),m=t("lJxs"),v=t("eIep"),O=t("wD+u");let _=(()=>{class e{constructor(e,i){this._firestore=e,this._fireauth=i,this._likes$=new f.a([]),this.likes$=this._likes$.asObservable(),console.log("[INFO] init likeService..."),this._fireauth.user.pipe(Object(m.a)(e=>null==e?void 0:e.uid),Object(v.a)(e=>this._firestore.collection("likes-products",i=>i.where("uid","==",e)).stateChanges(["added"]).pipe(Object(m.a)(e=>e.map(e=>{const i=e.payload.doc.id,t=e.payload.doc.data();return Object.assign({key:i},t)}))))).subscribe(e=>{const i=[...this._likes$.value.filter(i=>!e.find(e=>e.id===i.id)),...e];this._likes$.next(i)}),this._fireauth.user.pipe(Object(m.a)(e=>null==e?void 0:e.uid),Object(v.a)(e=>this._firestore.collection("likes-products",i=>i.where("uid","==",e)).stateChanges(["removed"]).pipe(Object(m.a)(e=>e.map(e=>{const i=e.payload.doc.id,t=e.payload.doc.data();return Object.assign({key:i},t)}))))).subscribe(e=>{const i=[...this._likes$.value.filter(i=>!e.find(e=>e.id===i.id))];this._likes$.next(i)})}isLiked(e){return this._likes$.pipe(Object(m.a)(i=>i.find(i=>i.id===e)),Object(m.a)(Boolean))}add(e){return Object(a.b)(this,void 0,void 0,function*(){const{uid:i=null}=yield this._fireauth.currentUser;this._firestore.collection("likes-products").add(Object.assign(Object.assign({},e),{uid:i}))})}remove(e){return Object(a.b)(this,void 0,void 0,function*(){const i=(yield this._likes$.pipe(Object(l.a)(),Object(m.a)(i=>i.find(i=>i.id===e))).toPromise()).key;yield this._firestore.collection("likes-products").doc(i).delete()})}getCount(e){return this._firestore.collection("likes-products",i=>i.where("id","==",e)).valueChanges().pipe(Object(m.a)(e=>e.length))}}return e.\u0275fac=function(i){return new(i||e)(d.Sb(O.a),d.Sb(b.a))},e.\u0275prov=d.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),x=(()=>{class e{constructor(e,i){this._firestore=e,this._fireauth=i,this._fav$=new f.a([]),this.favs$=this._fav$.asObservable(),console.log("[INFO] init FavService..."),this._fireauth.user.pipe(Object(m.a)(e=>null==e?void 0:e.uid),Object(v.a)(e=>this._firestore.collection("fav-products",i=>i.where("uid","==",e)).stateChanges(["added"]).pipe(Object(m.a)(e=>e.map(e=>{const i=e.payload.doc.id,t=e.payload.doc.data();return Object.assign({key:i},t)}))))).subscribe(e=>{const i=[...this._fav$.value.filter(i=>!e.find(e=>e.id===i.id)),...e];this._fav$.next(i)}),this._fireauth.user.pipe(Object(m.a)(e=>null==e?void 0:e.uid),Object(v.a)(e=>this._firestore.collection("fav-products",i=>i.where("uid","==",e)).stateChanges(["removed"]).pipe(Object(m.a)(e=>e.map(e=>{const i=e.payload.doc.id,t=e.payload.doc.data();return Object.assign({key:i},t)}))))).subscribe(e=>{const i=[...this._fav$.value.filter(i=>!e.find(e=>e.id===i.id))];this._fav$.next(i)})}isFav$(e){return this._fav$.pipe(Object(m.a)(i=>i.find(i=>i.id===e)),Object(m.a)(Boolean))}add(e){return Object(a.b)(this,void 0,void 0,function*(){const{uid:i=null}=yield this._fireauth.currentUser;this._firestore.collection("fav-products").add(Object.assign(Object.assign({},e),{uid:i}))})}remove(e){return Object(a.b)(this,void 0,void 0,function*(){const i=(yield this._fav$.pipe(Object(l.a)(),Object(m.a)(i=>i.find(i=>i.id===e))).toPromise()).key;yield this._firestore.collection("fav-products").doc(i).delete()})}}return e.\u0275fac=function(i){return new(i||e)(d.Sb(O.a),d.Sb(b.a))},e.\u0275prov=d.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),k=(()=>{class e{constructor(e){this._likeService=e}transform(e){return this._likeService.getCount(e)}}return e.\u0275fac=function(i){return new(i||e)(d.Jb(_))},e.\u0275pipe=d.Ib({name:"likesCount",type:e,pure:!0}),e})(),y=(()=>{class e{constructor(e){this._postService=e}transform(e){return this._postService.getFirstPostsByProduct(e)}}return e.\u0275fac=function(i){return new(i||e)(d.Jb(g.a))},e.\u0275pipe=d.Ib({name:"first",type:e,pure:!0}),e})();function N(e,i){if(1&e&&(d.Ob(0,"ion-segment-button",17),d.Ob(1,"ion-label"),d.oc(2),d.Nb(),d.Nb()),2&e){const e=i.$implicit;d.dc("value",e),d.zb(2),d.pc(e)}}function j(e,i){if(1&e){const e=d.Pb();d.Ob(0,"ion-chip"),d.Ob(1,"ion-avatar",41),d.Kb(2,"img",42),d.Nb(),d.Ob(3,"ion-label",43),d.oc(4),d.Nb(),d.Ob(5,"ion-note"),d.Ob(6,"p",44),d.oc(7),d.Nb(),d.Nb(),d.Ob(8,"ion-button",45),d.Wb("click",function(){d.gc(e);const i=d.Yb().$implicit;return d.Yb().openModal(i)}),d.Ob(9,"span",46),d.oc(10,"See all feeds"),d.Nb(),d.Nb(),d.Nb()}if(2&e){const e=i.ngIf;d.lc("background","#fff"),d.zb(4),d.qc("",e.username,", "),d.zb(3),d.pc(e.body)}}function C(e,i){1&e&&(d.Ob(0,"ion-chip",47),d.Ob(1,"ion-button",48),d.Ob(2,"span",46),d.oc(3,"0 feed"),d.Nb(),d.Nb(),d.Nb()),2&e&&d.lc("background","#fff")}function $(e,i){1&e&&d.Kb(0,"img",49),2&e&&d.dc("src",i.ngIf,d.ic)}function w(e,i){1&e&&d.Kb(0,"img",50)}function P(e,i){if(1&e){const e=d.Pb();d.Ob(0,"ion-card",18),d.Ob(1,"ion-item",19),d.Ob(2,"ion-label",20),d.Ob(3,"h2",21),d.oc(4),d.Nb(),d.Ob(5,"ion-text",22),d.Ob(6,"p",1),d.oc(7),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Kb(8,"img",23),d.Ob(9,"ion-card-header",24),d.Ob(10,"ion-button",25),d.Wb("click",function(){d.gc(e);const t=i.$implicit;return d.Yb().toggleLike(t)}),d.Kb(11,"ion-icon",26),d.Zb(12,"async"),d.Ob(13,"ion-note"),d.oc(14),d.Zb(15,"async"),d.Zb(16,"likesCount"),d.Nb(),d.Nb(),d.Ob(17,"ion-button",27),d.Wb("click",function(){d.gc(e);const t=i.$implicit;return d.Yb().toggleFav(t)}),d.Kb(18,"ion-icon",28),d.Zb(19,"async"),d.Nb(),d.Nb(),d.Ob(20,"ion-card-content",24),d.Ob(21,"ion-list-header",29),d.mc(22,j,11,4,"ion-chip",30),d.Zb(23,"async"),d.Zb(24,"first"),d.mc(25,C,4,2,"ng-template",null,31,d.nc),d.Nb(),d.Kb(27,"ion-item-divider"),d.Ob(28,"ion-item",32),d.Wb("click",function(t){d.gc(e);const n=i.$implicit;return d.Yb().presentPopover(t,n)}),d.Ob(29,"ion-avatar",33),d.mc(30,$,1,1,"img",34),d.Zb(31,"async"),d.mc(32,w,1,0,"ng-template",null,35,d.nc),d.Nb(),d.Ob(34,"ion-label",36),d.Ob(35,"ion-text",37),d.Ob(36,"p",38),d.oc(37),d.Zb(38,"async"),d.Nb(),d.Nb(),d.Ob(39,"ion-button",39),d.Wb("click",function(t){d.gc(e);const n=i.$implicit;return d.Yb().presentPopover(t,n)}),d.Kb(40,"ion-icon",40),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb()}if(2&e){const e=i.$implicit,t=d.fc(26),n=d.fc(33),o=d.Yb();let a=null,s=null;d.zb(4),d.pc(e.product_name),d.zb(3),d.pc(e.brand),d.zb(1),d.dc("src",e.image_url,d.ic),d.zb(3),d.dc("name",d.ac(12,11,o.isLiked$)?"heart":"heart-outline"),d.zb(3),d.pc(d.ac(15,13,d.ac(16,15,e.id))),d.zb(4),d.dc("name",d.ac(19,17,o.isFav$)?"bookmark":"bookmark-outline"),d.zb(4),d.dc("ngIf",d.ac(23,19,d.ac(24,21,e.id)))("ngIfElse",t),d.zb(8),d.dc("ngIf",null==(a=d.ac(31,23,o.user$))?null:a.photoUrl)("ngIfElse",n),d.zb(7),d.qc("",null==(s=d.ac(38,25,o.user$))?null:s.username," add a feed")}}const z=[{path:"",component:(()=>{class e{constructor(e,i,t,n,o,a,r,c){this._auth=e,this._userService=i,this.popoverController=t,this.modalController=n,this._productListService=o,this._postService=a,this._likeService=r,this._favService=c,this.min=0,this.max=10,this.category="all",this.searchTag=null,this.tags=["anti-acne","anti-rides","anti-rougeurs","anti-UV","bronzant","hydratant","nettoyant","peaux-sensibles","peaux-mixtes","peaux-seches","peaux-normales","cheveux","masque","corps","rasage","mains"],this._isLiked$=new s.a,this.isLiked$=this._isLiked$.asObservable(),this._isFav$=new s.a,this.isFav$=this._isFav$.asObservable()}ngOnInit(){return Object(a.b)(this,void 0,void 0,function*(){this.productList$=this._productListService.getProducts();const{uid:e=null}=yield this._auth.currentUser;this.user$=this._userService.getByUid(e)})}presentPopover(e,i){return Object(a.b)(this,void 0,void 0,function*(){const t=yield this.popoverController.create({component:r.a,cssClass:"custom-popover",event:e,translucent:!0,componentProps:{product:i,user$:this.user$}});return yield t.present()})}openModal(e){return Object(a.b)(this,void 0,void 0,function*(){const i=yield this.modalController.create({component:c.a,componentProps:{produit:e,user$:this.user$}});yield i.present()})}segmentChanged(e){this._productListService.setTag(e.detail.value)}onChange(e){this._productListService.setCategory(e.target.value)}loadData(e){this.max=this.max+10,e.target.complete()}toggleLike(e){return Object(a.b)(this,void 0,void 0,function*(){const i=yield this._likeService.isLiked(e.id).pipe(Object(l.a)()).toPromise();i?yield this.removeLike(e.id):yield this.addLike(e.id),this._isLiked$.next(!i)})}addLike(e){return Object(a.b)(this,void 0,void 0,function*(){yield this._likeService.add({id:e})})}removeLike(e){return Object(a.b)(this,void 0,void 0,function*(){yield this._likeService.remove(e)})}toggleFav(e){return Object(a.b)(this,void 0,void 0,function*(){const i=yield this._favService.isFav$(e.id).pipe(Object(l.a)()).toPromise();i?yield this.removeFav(e.id):yield this.addFav(e.id),this._isFav$.next(!i)})}addFav(e){return Object(a.b)(this,void 0,void 0,function*(){yield this._favService.add({id:e})})}removeFav(e){return Object(a.b)(this,void 0,void 0,function*(){yield this._favService.remove(e)})}}return e.\u0275fac=function(i){return new(i||e)(d.Jb(b.a),d.Jb(u.a),d.Jb(p.ab),d.Jb(p.Z),d.Jb(h.a),d.Jb(g.a),d.Jb(_),d.Jb(x))},e.\u0275cmp=d.Db({type:e,selectors:[["app-home"]],decls:34,vars:4,consts:[[1,"ion-no-padding"],[1,"ion-text-capitalize"],["slot","end",1,"ion-no-padding"],["color","dark"],["ok-text","Ok","cancel-text","Cancel","value","all",3,"ionChange"],["value","all"],["value","paramedical"],["value","biologique"],["value","artisanal"],["value","industriel"],["color","medium","value","null","scrollable","",1,"ion-no-margin","SwipedTabs-tabs","ion-text-capitalize",3,"ionChange"],["value","null",1,"ion-no-padding"],["class","ion-no-padding","color","medium","layout","icon-start",3,"value",4,"ngFor","ngForOf"],["size","12",1,"ion-no-padding"],["class","ion-margin-bottom",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],["color","medium","layout","icon-start",1,"ion-no-padding",3,"value"],[1,"ion-margin-bottom"],[1,"brandItem"],[1,"ion-no-margin"],[1,"ion-no-margin","ion-text-capitalize","name"],["color","primary"],[1,"post_img",3,"src"],[1,"ion-no-padding","ion-no-margin"],["fill","clear","shape","round","size","small",1,"ion-no-padding","ion-no-margin",3,"click"],["slot","icon-only",3,"name"],["fill","clear","shape","round","size","small",1,"bookmark",3,"click"],[3,"name"],["lines","line",1,"ion-no-padding","ion-no-margin"],[3,"background",4,"ngIf","ngIfElse"],["comment",""],["lines","none",3,"click"],["slot","start",1,"comment_avatar"],[3,"src",4,"ngIf","ngIfElse"],["default",""],[1,"inputComment","ion-padding"],["color","medium"],[1,"s-text2"],["fill","clear","sizs","small",3,"click"],["slot","end","name","send"],[1,"post_avatar"],["src","./assets/icons/profilFemal.svg"],[1,"post_label"],[1,"post-text"],["fill","clear","size","small",3,"click"],[1,"comment-text1"],[1,"ion-text-center"],["fill","clear","size","small",1,"ion-no-padding","ion-no-margin","text","center"],[3,"src"],["src","./assets/images/users/profil_32.png"]],template:function(e,i){if(1&e&&(d.Ob(0,"ion-header"),d.Ob(1,"ion-toolbar",0),d.Ob(2,"ion-title",0),d.Ob(3,"h1",1),d.oc(4,"BeautyFavs"),d.Nb(),d.Nb(),d.Ob(5,"ion-buttons",2),d.Ob(6,"ion-button",3),d.Ob(7,"ion-item"),d.Ob(8,"ion-select",4),d.Wb("ionChange",function(e){return i.onChange(e)}),d.Ob(9,"ion-select-option",5),d.oc(10,"All"),d.Nb(),d.Ob(11,"ion-select-option",6),d.oc(12,"Paramedical"),d.Nb(),d.Ob(13,"ion-select-option",7),d.oc(14,"Biologique"),d.Nb(),d.Ob(15,"ion-select-option",8),d.oc(16,"Artisanal"),d.Nb(),d.Ob(17,"ion-select-option",9),d.oc(18,"Industriel"),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Ob(19,"ion-toolbar"),d.Ob(20,"ion-segment",10),d.Wb("ionChange",function(e){return i.segmentChanged(e)}),d.Ob(21,"ion-segment-button",11),d.Ob(22,"ion-label"),d.oc(23,"All"),d.Nb(),d.Nb(),d.mc(24,N,3,2,"ion-segment-button",12),d.Nb(),d.Nb(),d.Nb(),d.Ob(25,"ion-content"),d.Ob(26,"ion-grid",0),d.Ob(27,"ion-row",0),d.Ob(28,"ion-col",13),d.Ob(29,"ion-list",0),d.mc(30,P,41,27,"ion-card",14),d.Zb(31,"async"),d.Nb(),d.Ob(32,"ion-infinite-scroll",15),d.Wb("ionInfinite",function(e){return i.loadData(e)}),d.Kb(33,"ion-infinite-scroll-content",16),d.Nb(),d.Nb(),d.Nb(),d.Nb(),d.Nb()),2&e){let e=null;d.zb(24),d.dc("ngForOf",i.tags.sort()),d.zb(6),d.dc("ngForOf",null==(e=d.ac(31,2,i.productList$))?null:e.slice(i.min,i.max))}},directives:[p.u,p.W,p.V,p.i,p.h,p.A,p.L,p.cb,p.M,p.J,p.K,p.C,n.i,p.r,p.t,p.H,p.q,p.D,p.x,p.y,p.j,p.S,p.l,p.v,p.F,p.k,p.E,n.j,p.B,p.e,p.p],pipes:[n.b,k,y],styles:[".img-wrapper[_ngcontent-%COMP%]{min-height:40px;width:100%;background-size:cover;background-repeat:no-repeat;vertical-align:middle}.post_img[_ngcontent-%COMP%]{width:100%;max-height:300px}.post_avatar[_ngcontent-%COMP%]{padding:2px;height:35px;width:35px}.post_label[_ngcontent-%COMP%]{font-size:14px!important;font-weight:700}.post-text[_ngcontent-%COMP%], .post_label[_ngcontent-%COMP%]{color:#1e2023!important}.post-text[_ngcontent-%COMP%]{font-size:12px;margin:0 6px}.comment-text1[_ngcontent-%COMP%]{margin:2.5px 6px 0 16px}.comment-text1[_ngcontent-%COMP%], .comment-text2[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium)}.comment-text2[_ngcontent-%COMP%]{display:inline;margin:2px 6px 0 0}.comment_avatar[_ngcontent-%COMP%]{padding:1px;height:40px;width:40px}.bookmark[_ngcontent-%COMP%]{position:absolute;right:-27px}ion-segment[_ngcontent-%COMP%]{height:40px;min-height:40px;padding-top:5px}ion-segment-button[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:var(--ion-color-medium);text-transform:capitalize;--border-color:#f2f2f2;--border-radius:5px;--border-style:solid;--border-width:1px;height:30px;min-height:30px;min-width:100px;--padding-end:3px;color:#1e2023}ion-card[_ngcontent-%COMP%]{box-shadow:0 0 6px 0 rgba(157,96,212,.5);border:3px solid transparent;background-image:linear-gradient(hsla(0,0%,100%,0),hsla(0,0%,100%,0)),linear-gradient(101deg,#78e4ff,#ff48fa);background-origin:border-box;background-clip:content-box,border-box;box-shadow:inset 2px 1000px 1px #fff}ion-item.brandItem[_ngcontent-%COMP%]{--padding-start:2px;font-weight:550}h2.name[_ngcontent-%COMP%]{font-weight:550}.inputComment[_ngcontent-%COMP%]{border:1px solid #f5f6f9;border-radius:50px;font-size:12px;background-color:#f5f6f9}ion-item-divider[_ngcontent-%COMP%]{min-height:1px}"]}),e})()}];let S=(()=>{class e{}return e.\u0275mod=d.Hb({type:e}),e.\u0275inj=d.Gb({factory:function(i){return new(i||e)},imports:[[o.g.forChild(z)],o.g]}),e})(),F=(()=>{class e{}return e.\u0275mod=d.Hb({type:e}),e.\u0275inj=d.Gb({factory:function(i){return new(i||e)},imports:[[n.c,S,p.X]]}),e})()}}]);