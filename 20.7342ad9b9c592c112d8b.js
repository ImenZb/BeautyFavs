(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{Wlq6:function(e,t,n){"use strict";n.r(t),n.d(t,"SearchModule",function(){return z});var i=n("ofXK"),o=n("tyNb"),r=n("mrSG"),l=n("cp0P"),c=n("SxV6"),s=n("lJxs"),a=n("81uL"),b=n("fXoL"),u=n("tk/3");let p=(()=>{class e{constructor(e){this._http=e}getAll(e){return this._http.get("https://www.googleapis.com/customsearch/v1?key=AIzaSyCFen6NifzjQvj_QX8vhh_-sMil2nJtNbI&cx=4a589f3673b1234e4&q="+e)}}return e.\u0275fac=function(t){return new(t||e)(b.Sb(u.a))},e.\u0275prov=b.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=n("Gdn9"),h=n("eDGZ"),g=n("TEn/");function f(e,t){1&e&&(b.Ob(0,"ion-list-header"),b.Ob(1,"ion-label"),b.pc(2,"Already reviewd"),b.Nb(),b.Nb())}function m(e,t){if(1&e&&(b.Mb(0),b.Ob(1,"ion-item"),b.Ob(2,"ion-avatar",4),b.Kb(3,"img",5),b.Nb(),b.Ob(4,"ion-label",6),b.Ob(5,"ion-text"),b.pc(6),b.Nb(),b.Ob(7,"ion-text",7),b.Kb(8,"br"),b.pc(9),b.Nb(),b.Nb(),b.Ob(10,"ion-button",8),b.Kb(11,"ion-icon",9),b.Nb(),b.Nb(),b.Lb()),2&e){const e=t.$implicit;b.zb(3),b.dc("src",null==e?null:e.image_url,b.ic),b.zb(3),b.qc(null==e?null:e.product_name),b.zb(3),b.rc("",e.brand," "),b.zb(1),b.dc("routerLink","../detail/"+e.id)}}function O(e,t){1&e&&(b.Ob(0,"ion-list-header"),b.Ob(1,"ion-label"),b.pc(2,"New products add feed"),b.Nb(),b.Nb())}function N(e,t){if(1&e){const e=b.Pb();b.Mb(0),b.Ob(1,"ion-item"),b.Ob(2,"ion-avatar",4),b.Kb(3,"img",5),b.Nb(),b.Ob(4,"ion-label",6),b.Kb(5,"ion-text",10),b.Ob(6,"ion-text",7),b.Kb(7,"br"),b.pc(8),b.Nb(),b.Nb(),b.Ob(9,"ion-button",11),b.Wb("click",function(){b.gc(e);const t=b.Yb().$implicit;return b.Yb().openModal(t)}),b.Kb(10,"ion-icon",12),b.Nb(),b.Nb(),b.Lb()}if(2&e){const e=b.Yb().$implicit;b.zb(3),b.dc("src",null==e||null==e.pagemap||null==e.pagemap.cse_thumbnail[0]?null:e.pagemap.cse_thumbnail[0].src,b.ic),b.zb(2),b.dc("innerHTML",(null==e?null:e.htmlTitle.split("/b>")[0])+"/b>",b.hc),b.zb(3),b.rc("Vendu par ",e.displayLink.split(".")[1]," ")}}function y(e,t){if(1&e&&(b.Mb(0),b.nc(1,N,11,3,"ng-container",2),b.Lb()),2&e){const e=t.$implicit;b.zb(1),b.dc("ngIf",(null==e||null==e.pagemap?null:e.pagemap.cse_thumbnail)&&!(null!=e&&e.htmlTitle.includes("ligne")))}}const v=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.serviceGoogle=e,this.serviceProduit=t,this._productListService=n,this.modalCtrl=i,this.query="",this.isKeyEntered=!1}ngOnInit(){}filterList(e){this.query=e.srcElement.value,this.isKeyEntered=!0,this.resultsGoogle=this.getGoogle(),this.resultsLocal=this.getLocal()}getGoogle(){return Object(l.a)([this.serviceGoogle.getAll(this.query),this._productListService.productList$.pipe(Object(c.a)())]).pipe(Object(s.a)(([e,t])=>{let n=[];return[...e.items].forEach(e=>{for(let i=0;i<t.length;i++){const o=t[i],r=e.title.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),l=o.product_name.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");r.includes(l)||n.push(e)}}),[...new Set(n)]}))}getLocal(){return Object(l.a)([this.serviceGoogle.getAll(this.query),this._productListService.productList$.pipe(Object(c.a)())]).pipe(Object(s.a)(([e,t])=>{let n=[];return[...e.items].forEach(e=>{for(let i=0;i<t.length;i++){const o=t[i],r=e.title.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),l=o.product_name.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");r.split(""),r.includes(l)&&n.push(o)}}),console.log("array",n),console.log("set array",[...new Set(n)]),[...new Set(n)]}))}openModal(e){return Object(r.b)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:a.a,componentProps:{productName:e.title,productImg:e.pagemap.cse_thumbnail[0].src||"../../../assets/images/home1.jpg"}});yield t.present()})}isMatched(e,t){let n=e.split(" "),i=!1;for(let o=0;o<n.length&&(i=t.includes(n[o]),!i);o++);return i}}return e.\u0275fac=function(t){return new(t||e)(b.Jb(p),b.Jb(d.a),b.Jb(h.a),b.Jb(g.bb))},e.\u0275cmp=b.Db({type:e,selectors:[["app-search"]],decls:18,vars:10,consts:[["size","12"],[3,"keyup.enter"],[4,"ngIf"],[4,"ngFor","ngForOf"],["slot","start"],[3,"src"],[1,"ion-text-wrap","myLabel"],["color","primary"],["fill","clear","shape","round","size","small",3,"routerLink"],["slot","end","name","chevron-forward-outline"],[3,"innerHTML"],["fill","clear","shape","round","size","small",3,"click"],["slot","end","name","add"]],template:function(e,t){if(1&e&&(b.Ob(0,"ion-content"),b.Ob(1,"ion-grid"),b.Ob(2,"ion-row"),b.Ob(3,"ion-col",0),b.Ob(4,"ion-searchbar",1),b.Wb("keyup.enter",function(e){return t.filterList(e)}),b.Nb(),b.Nb(),b.Nb(),b.Ob(5,"ion-row"),b.Ob(6,"ion-col",0),b.Ob(7,"ion-list"),b.nc(8,f,3,0,"ion-list-header",2),b.Zb(9,"async"),b.nc(10,m,12,4,"ng-container",3),b.Zb(11,"async"),b.Nb(),b.Nb(),b.Nb(),b.Ob(12,"ion-row"),b.Ob(13,"ion-col",0),b.Ob(14,"ion-list"),b.nc(15,O,3,0,"ion-list-header",2),b.nc(16,y,2,1,"ng-container",3),b.Zb(17,"async"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()),2&e){let e=null;b.zb(8),b.dc("ngIf",t.isKeyEntered&&(null==(e=b.ac(9,4,t.resultsLocal))?null:e.length)>0),b.zb(2),b.dc("ngForOf",b.ac(11,6,t.resultsLocal)),b.zb(5),b.dc("ngIf",t.isKeyEntered),b.zb(1),b.dc("ngForOf",b.ac(17,8,t.resultsGoogle))}},directives:[g.q,g.s,g.I,g.p,g.J,g.fb,g.C,i.j,i.i,g.D,g.B,g.z,g.e,g.T,g.h,o.f,g.db,g.u],pipes:[i.b],styles:[".myLabel[_ngcontent-%COMP%]{font-size:12px}"]}),e})()}];let L=(()=>{class e{}return e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({factory:function(t){return new(t||e)},imports:[[o.g.forChild(v)],o.g]}),e})();var w=n("PCNd");let z=(()=>{class e{}return e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({factory:function(t){return new(t||e)},imports:[[i.c,L,g.Y,u.b,w.a]]}),e})()}}]);