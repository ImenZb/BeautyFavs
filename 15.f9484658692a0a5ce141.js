(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{fOOd:function(n,i,e){"use strict";e.r(i),e.d(i,"HomeModule",function(){return Z});var t=e("ofXK"),o=e("tyNb"),c=e("mrSG"),a=e("2Vo4"),r=e("n4WL"),s=e("Nf9K"),l=e("SxV6"),b=e("fXoL"),d=e("UbJi"),p=e("qfBg"),u=e("TEn/"),g=e("eDGZ"),m=e("ENZJ"),f=e("lJxs"),h=e("eIep"),v=e("I/3d");let O=(()=>{class n{constructor(n,i){this._firestore=n,this._fireauth=i,this._likes$=new a.a([]),this.likes$=this._likes$.asObservable(),this._fireauth.user.pipe(Object(f.a)(n=>null==n?void 0:n.uid),Object(h.a)(n=>this._firestore.collection("likes-products",i=>i.where("uid","==",n)).stateChanges(["added"]).pipe(Object(f.a)(n=>n.map(n=>{const i=n.payload.doc.id,e=n.payload.doc.data();return Object.assign({key:i},e)}))))).subscribe(n=>{const i=[...this._likes$.value.filter(i=>!n.find(n=>n.id===i.id)),...n];this._likes$.next(i)}),this._fireauth.user.pipe(Object(f.a)(n=>null==n?void 0:n.uid),Object(h.a)(n=>this._firestore.collection("likes-products",i=>i.where("uid","==",n)).stateChanges(["removed"]).pipe(Object(f.a)(n=>n.map(n=>{const i=n.payload.doc.id,e=n.payload.doc.data();return Object.assign({key:i},e)}))))).subscribe(n=>{const i=[...this._likes$.value.filter(i=>!n.find(n=>n.id===i.id))];this._likes$.next(i)})}isLiked(n){return this._likes$.pipe(Object(f.a)(i=>i.find(i=>i.id===n)),Object(f.a)(Boolean))}add(n){return Object(c.b)(this,void 0,void 0,function*(){const{uid:i=null}=yield this._fireauth.currentUser;this._firestore.collection("likes-products").add(Object.assign(Object.assign({},n),{uid:i}))})}remove(n){return Object(c.b)(this,void 0,void 0,function*(){const i=(yield this._likes$.pipe(Object(l.a)(),Object(f.a)(i=>i.find(i=>i.id===n))).toPromise()).key;yield this._firestore.collection("likes-products").doc(i).delete()})}getCount(n){return this._firestore.collection("likes-products",i=>i.where("id","==",n)).valueChanges().pipe(Object(f.a)(n=>n.length))}}return n.\u0275fac=function(i){return new(i||n)(b.Sb(v.a),b.Sb(d.a))},n.\u0275prov=b.Fb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=e("+acA");let k=(()=>{class n{constructor(n){this._likeService=n}transform(n){return this._likeService.getCount(n)}}return n.\u0275fac=function(i){return new(i||n)(b.Jb(O))},n.\u0275pipe=b.Ib({name:"likesCount",type:n,pure:!0}),n})(),_=(()=>{class n{constructor(n){this._postService=n}transform(n){return this._postService.getFirstPostsByProduct(n)}}return n.\u0275fac=function(i){return new(i||n)(b.Jb(m.a))},n.\u0275pipe=b.Ib({name:"first",type:n,pure:!0}),n})(),y=(()=>{class n{constructor(n){this._likeService=n}transform(n){return this._likeService.isLiked(n)}}return n.\u0275fac=function(i){return new(i||n)(b.Jb(O))},n.\u0275pipe=b.Ib({name:"likesInit",type:n,pure:!0}),n})(),N=(()=>{class n{constructor(n){this._favService=n}transform(n){return this._favService.isFav$(n)}}return n.\u0275fac=function(i){return new(i||n)(b.Jb(x.a))},n.\u0275pipe=b.Ib({name:"favInit",type:n,pure:!0}),n})();function C(n,i){if(1&n&&(b.Ob(0,"ion-segment-button",17),b.Ob(1,"ion-label"),b.pc(2),b.Nb(),b.Nb()),2&n){const n=i.$implicit;b.dc("value",n),b.zb(2),b.qc(n)}}function $(n,i){if(1&n&&(b.Kb(0,"ion-icon",43),b.Zb(1,"async")),2&n){const n=b.Yb(2);b.dc("name",b.ac(1,1,n.isLiked$)?"heart":"heart-outline")}}function w(n,i){if(1&n&&(b.Kb(0,"ion-icon",43),b.Zb(1,"async"),b.Zb(2,"likesInit")),2&n){const n=b.Yb().$implicit;b.dc("name",b.ac(1,1,b.ac(2,3,n.id))?"heart":"heart-outline")}}function I(n,i){if(1&n&&(b.Kb(0,"ion-icon",44),b.Zb(1,"async")),2&n){const n=b.Yb(2);b.dc("name",b.ac(1,1,n.isFav$)?"bookmark":"bookmark-outline")}}function P(n,i){if(1&n&&(b.Kb(0,"ion-icon",43),b.Zb(1,"async"),b.Zb(2,"favInit")),2&n){const n=b.Yb().$implicit;b.dc("name",b.ac(1,1,b.ac(2,3,n.id))?"bookmark":"bookmark-outline")}}function j(n,i){if(1&n){const n=b.Pb();b.Ob(0,"ion-chip",24),b.Ob(1,"ion-label",45),b.pc(2),b.Nb(),b.Ob(3,"ion-note"),b.Ob(4,"p",46),b.pc(5),b.Nb(),b.Nb(),b.Ob(6,"ion-button",47),b.Wb("click",function(){b.gc(n);const i=b.Yb().$implicit;return b.Yb().openModal(i)}),b.Ob(7,"span",48),b.pc(8,"See all feeds"),b.Nb(),b.Nb(),b.Nb()}if(2&n){const n=i.ngIf;b.mc("background","#fff"),b.zb(2),b.rc("",n.username,", "),b.zb(3),b.qc(n.body)}}function z(n,i){1&n&&(b.Ob(0,"ion-chip",49),b.Ob(1,"ion-button",50),b.Ob(2,"span",48),b.pc(3,"0 feed"),b.Nb(),b.Nb(),b.Nb()),2&n&&b.mc("background","#fff")}function S(n,i){1&n&&b.Kb(0,"img",51),2&n&&b.dc("src",i.ngIf,b.ic)}function L(n,i){1&n&&b.Kb(0,"img",52)}function M(n,i){if(1&n){const n=b.Pb();b.Ob(0,"ion-card",18),b.Ob(1,"ion-item",19),b.Ob(2,"ion-label",20),b.Ob(3,"h2",21),b.pc(4),b.Nb(),b.Ob(5,"ion-text",22),b.Ob(6,"p",1),b.pc(7),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Kb(8,"img",23),b.Ob(9,"ion-card-header",24),b.Ob(10,"ion-button",25),b.Wb("click",function(){b.gc(n);const e=i.$implicit;return b.Yb().toggleLike(e)}),b.nc(11,$,2,3,"ion-icon",26),b.Zb(12,"async"),b.nc(13,w,3,5,"ng-template",null,27,b.oc),b.Ob(15,"ion-note"),b.pc(16),b.Zb(17,"async"),b.Zb(18,"likesCount"),b.Nb(),b.Nb(),b.Ob(19,"ion-button",28),b.Wb("click",function(){b.gc(n);const e=i.$implicit;return b.Yb().toggleFav(e)}),b.nc(20,I,2,3,"ion-icon",29),b.Zb(21,"async"),b.nc(22,P,3,5,"ng-template",null,30,b.oc),b.Nb(),b.Nb(),b.Ob(24,"ion-card-content",24),b.Ob(25,"ion-list-header",31),b.nc(26,j,9,4,"ion-chip",32),b.Zb(27,"async"),b.Zb(28,"first"),b.nc(29,z,4,2,"ng-template",null,33,b.oc),b.Nb(),b.Kb(31,"ion-item-divider"),b.Ob(32,"ion-item",34),b.Wb("click",function(e){b.gc(n);const t=i.$implicit;return b.Yb().presentPopover(e,t)}),b.Ob(33,"ion-avatar",35),b.nc(34,S,1,1,"img",36),b.Zb(35,"async"),b.nc(36,L,1,0,"ng-template",null,37,b.oc),b.Nb(),b.Ob(38,"ion-label",38),b.Ob(39,"ion-text",39),b.Ob(40,"p",40),b.pc(41),b.Zb(42,"async"),b.Nb(),b.Nb(),b.Ob(43,"ion-button",41),b.Wb("click",function(e){b.gc(n);const t=i.$implicit;return b.Yb().presentPopover(e,t)}),b.Kb(44,"ion-icon",42),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()}if(2&n){const n=i.$implicit,e=b.fc(14),t=b.fc(23),o=b.fc(30),c=b.fc(37),a=b.Yb();let r=null,s=null;b.zb(4),b.qc(n.product_name),b.zb(3),b.qc(n.brand),b.zb(1),b.dc("src",n.image_url,b.ic),b.zb(3),b.dc("ngIf",null!==b.ac(12,13,a.isLiked$))("ngIfElse",e),b.zb(5),b.qc(b.ac(17,15,b.ac(18,17,n.id))),b.zb(4),b.dc("ngIf",null!==b.ac(21,19,a.isFav$))("ngIfElse",t),b.zb(6),b.dc("ngIf",b.ac(27,21,b.ac(28,23,n.id)))("ngIfElse",o),b.zb(8),b.dc("ngIf",null==(r=b.ac(35,25,a.user$))?null:r.photoUrl)("ngIfElse",c),b.zb(7),b.rc("",null==(s=b.ac(42,27,a.user$))?null:s.username," add a feed")}}const F=[{path:"",component:(()=>{class n{constructor(n,i,e,t,o,c,r,s){this._auth=n,this._userService=i,this.popoverController=e,this.modalController=t,this._productListService=o,this._postService=c,this._likeService=r,this._favService=s,this.min=0,this.max=10,this.category="all",this.searchTag=null,this.tags=["anti-acne","anti-rides","anti-rougeurs","anti-UV","bronzant","hydratant","nettoyant","peaux-sensibles","peaux-mixtes","peaux-seches","peaux-normales","cheveux","masque","corps","rasage","mains"],this._isLiked$=new a.a(null),this.isLiked$=this._isLiked$.asObservable(),this._isFav$=new a.a(null),this.isFav$=this._isFav$.asObservable()}ngOnInit(){return Object(c.b)(this,void 0,void 0,function*(){this.productList$=this._productListService.getProducts();const{uid:n=null}=yield this._auth.currentUser;this.user$=this._userService.getByUid(n)})}presentPopover(n,i){return Object(c.b)(this,void 0,void 0,function*(){const e=yield this.popoverController.create({component:r.a,cssClass:"custom-popover",event:n,translucent:!0,componentProps:{product:i,user$:this.user$}});return yield e.present()})}openModal(n){return Object(c.b)(this,void 0,void 0,function*(){const i=yield this.modalController.create({component:s.a,componentProps:{produit:n,user$:this.user$}});yield i.present()})}segmentChanged(n){this._productListService.setTag(n.detail.value)}onChange(n){this._productListService.setCategory(n.target.value)}loadData(n){this.max=this.max+10,n.target.complete()}toggleLike(n){return Object(c.b)(this,void 0,void 0,function*(){const i=yield this._likeService.isLiked(n.id).pipe(Object(l.a)()).toPromise();i?yield this.removeLike(n.id):yield this.addLike(n.id),this._isLiked$.next(!i)})}addLike(n){return Object(c.b)(this,void 0,void 0,function*(){yield this._likeService.add({id:n})})}removeLike(n){return Object(c.b)(this,void 0,void 0,function*(){yield this._likeService.remove(n)})}toggleFav(n){return Object(c.b)(this,void 0,void 0,function*(){const i=yield this._favService.isFav$(n.id).pipe(Object(l.a)()).toPromise();i?yield this.removeFav(n.id):yield this.addFav(n.id),this._isFav$.next(!i)})}addFav(n){return Object(c.b)(this,void 0,void 0,function*(){yield this._favService.add({id:n})})}removeFav(n){return Object(c.b)(this,void 0,void 0,function*(){yield this._favService.remove(n)})}}return n.\u0275fac=function(i){return new(i||n)(b.Jb(d.a),b.Jb(p.a),b.Jb(u.cb),b.Jb(u.bb),b.Jb(g.a),b.Jb(m.a),b.Jb(O),b.Jb(x.a))},n.\u0275cmp=b.Db({type:n,selectors:[["app-home"]],decls:34,vars:4,consts:[[1,"ion-no-padding"],[1,"ion-text-capitalize"],["slot","end",1,"ion-no-padding"],["color","dark"],["ok-text","Ok","cancel-text","Cancel","value","all",3,"ionChange"],["value","all"],["value","paramedical"],["value","biologique"],["value","artisanal"],["value","industriel"],["color","medium","value","null","scrollable","",1,"ion-no-margin","SwipedTabs-tabs","ion-text-capitalize",3,"ionChange"],["value","null",1,"ion-no-padding"],["class","ion-no-padding","color","medium","layout","icon-start",3,"value",4,"ngFor","ngForOf"],["size","12",1,"ion-no-padding"],["class","ion-margin-bottom",4,"ngFor","ngForOf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],["color","medium","layout","icon-start",1,"ion-no-padding",3,"value"],[1,"ion-margin-bottom"],[1,"brandItem"],[1,"ion-no-margin"],[1,"ion-no-margin","ion-text-capitalize","name"],["color","primary"],[1,"post_img",3,"src"],[1,"ion-no-padding","ion-no-margin"],["fill","clear","shape","round","size","small",1,"ion-no-padding","ion-no-margin",3,"click"],["slot","icon-only",3,"name",4,"ngIf","ngIfElse"],["initLike",""],["fill","clear","shape","round","size","small",1,"bookmark",3,"click"],[3,"name",4,"ngIf","ngIfElse"],["initFav",""],["lines","line",1,"ion-no-padding","ion-no-margin"],["class","ion-no-padding ion-no-margin",3,"background",4,"ngIf","ngIfElse"],["comment",""],["lines","none",3,"click"],["slot","start",1,"comment_avatar"],[3,"src",4,"ngIf","ngIfElse"],["default",""],[1,"inputComment","ion-padding"],["color","medium"],[1,"s-text2"],["fill","clear","sizs","small",3,"click"],["slot","end","name","send"],["slot","icon-only",3,"name"],[3,"name"],[1,"post_label"],[1,"post-text"],["fill","clear","size","small",3,"click"],[1,"comment-text1"],[1,"ion-text-center"],["fill","clear","size","small",1,"ion-no-padding","ion-no-margin","text","center"],[3,"src"],["src","assets/images/users/profile_32.png"]],template:function(n,i){if(1&n&&(b.Ob(0,"ion-header"),b.Ob(1,"ion-toolbar",0),b.Ob(2,"ion-title",0),b.Ob(3,"h1",1),b.pc(4,"BeautyFavs"),b.Nb(),b.Nb(),b.Ob(5,"ion-buttons",2),b.Ob(6,"ion-button",3),b.Ob(7,"ion-item"),b.Ob(8,"ion-select",4),b.Wb("ionChange",function(n){return i.onChange(n)}),b.Ob(9,"ion-select-option",5),b.pc(10,"All"),b.Nb(),b.Ob(11,"ion-select-option",6),b.pc(12,"Paramedical"),b.Nb(),b.Ob(13,"ion-select-option",7),b.pc(14,"Biologique"),b.Nb(),b.Ob(15,"ion-select-option",8),b.pc(16,"Artisanal"),b.Nb(),b.Ob(17,"ion-select-option",9),b.pc(18,"Industriel"),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Ob(19,"ion-toolbar"),b.Ob(20,"ion-segment",10),b.Wb("ionChange",function(n){return i.segmentChanged(n)}),b.Ob(21,"ion-segment-button",11),b.Ob(22,"ion-label"),b.pc(23,"All"),b.Nb(),b.Nb(),b.nc(24,C,3,2,"ion-segment-button",12),b.Nb(),b.Nb(),b.Nb(),b.Ob(25,"ion-content"),b.Ob(26,"ion-grid",0),b.Ob(27,"ion-row",0),b.Ob(28,"ion-col",13),b.Ob(29,"ion-list",0),b.nc(30,M,45,29,"ion-card",14),b.Zb(31,"async"),b.Nb(),b.Ob(32,"ion-infinite-scroll",15),b.Wb("ionInfinite",function(n){return i.loadData(n)}),b.Kb(33,"ion-infinite-scroll-content",16),b.Nb(),b.Nb(),b.Nb(),b.Nb(),b.Nb()),2&n){let n=null;b.zb(24),b.dc("ngForOf",i.tags.sort()),b.zb(6),b.dc("ngForOf",null==(n=b.ac(31,2,i.productList$))?null:n.slice(i.min,i.max))}},directives:[u.t,u.X,u.W,u.i,u.h,u.z,u.M,u.eb,u.N,u.K,u.L,u.B,t.i,u.q,u.s,u.I,u.p,u.C,u.w,u.x,u.j,u.T,u.l,t.j,u.G,u.k,u.D,u.A,u.e,u.u,u.o],pipes:[t.b,k,_,y,N],styles:[".img-wrapper[_ngcontent-%COMP%]{min-height:40px;width:100%;background-size:cover;background-repeat:no-repeat;vertical-align:middle}.post_img[_ngcontent-%COMP%]{width:100%;max-height:300px}.post_avatar[_ngcontent-%COMP%]{padding:2px;height:35px;width:35px}.post_label[_ngcontent-%COMP%]{white-space:nowrap;font-size:14px!important;font-weight:700;padding-left:5px}.post-text[_ngcontent-%COMP%], .post_label[_ngcontent-%COMP%]{color:#1e2023!important}.post-text[_ngcontent-%COMP%]{font-size:12px;margin:0 6px}.comment-text1[_ngcontent-%COMP%]{margin:2.5px 6px 0 16px}.comment-text1[_ngcontent-%COMP%], .comment-text2[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium)}.comment-text2[_ngcontent-%COMP%]{display:inline;margin:2px 6px 0 0}.comment_avatar[_ngcontent-%COMP%]{padding:1px;height:40px;width:40px}.bookmark[_ngcontent-%COMP%]{position:absolute;right:-27px}ion-segment[_ngcontent-%COMP%]{height:40px;min-height:40px;padding-top:5px}ion-segment-button[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:var(--ion-color-medium);text-transform:capitalize;--border-color:#f2f2f2;--border-radius:5px;--border-style:solid;--border-width:1px;height:30px;min-height:30px;min-width:100px;--padding-end:3px;color:#1e2023}ion-card[_ngcontent-%COMP%]{box-shadow:0 0 6px 0 rgba(157,96,212,.5);border:3px solid transparent;background-image:linear-gradient(hsla(0,0%,100%,0),hsla(0,0%,100%,0)),linear-gradient(101deg,#78e4ff,#ff48fa);background-origin:border-box;background-clip:content-box,border-box;box-shadow:inset 2px 1000px 1px #fff}ion-item.brandItem[_ngcontent-%COMP%]{--padding-start:2px;font-weight:550}h2.name[_ngcontent-%COMP%]{font-weight:550}.inputComment[_ngcontent-%COMP%]{border:1px solid #f5f6f9;border-radius:50px;font-size:12px;background-color:#f5f6f9;position:relative}.inputComment[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;right:5px;top:8px}ion-item-divider[_ngcontent-%COMP%]{min-height:1px}"]}),n})()}];let J=(()=>{class n{}return n.\u0275mod=b.Hb({type:n}),n.\u0275inj=b.Gb({factory:function(i){return new(i||n)},imports:[[o.g.forChild(F)],o.g]}),n})(),Z=(()=>{class n{}return n.\u0275mod=b.Hb({type:n}),n.\u0275inj=b.Gb({factory:function(i){return new(i||n)},imports:[[t.c,J,u.Y]]}),n})()}}]);